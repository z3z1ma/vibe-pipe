---
"id": "vp-101"
"status": "closed"
"deps":
- "vp-100"
"links": []
"created": "2026-01-27T23:30:00Z"
"type": "feature"
"priority": 1
"tags":
- "phase1"
- "persistence"
"external": {}
---
# IO Manager Abstraction Layer

## Implementation Complete

Implemented IO Manager abstraction for asset materialization (Dagster-inspired).

### Tasks Completed

- [x] Define `IOManager` protocol with `handle_output()` and `load_input()` methods
- [x] Create `MemoryIOManager` (default, existing behavior)
- [x] Create `FileIOManager` (local file system)
- [x] Create `S3IOManager` (AWS S3)
- [x] Create `DatabaseIOManager` (SQLAlchemy-based)
- [x] Add `io_manager` config to `Asset`
- [x] Update execution engine to use IO managers

### Acceptance Criteria

- [x] IO Manager protocol defined
- [x] 4 IO managers implemented (memory, file, S3, database)
- [x] Assets can specify IO manager in config
- [x] Execution engine uses IO managers for materialization
- [x] Load/save operations are type-safe
- [x] Unit tests for each IO manager (45 tests passed, 8 skipped)
- [x] Integration test showing end-to-end materialization

### Example Usage

```python
from vibe_piper import asset, AssetType
from vibe_piper.io_managers import FileIOManager

@asset(
    name="customers",
    asset_type=AssetType.FILE,
    uri="/data/customers.json",
    io_manager="file"
)
def extract_customers():
    return [{"id": 1, "name": "Alice"}, {"id": 2, "name": "Bob"}]
```

### Deliverables

- New module: `src/vibe_piper/io_managers/`
- Protocol: `IOManager` in `types.py`
- Updated execution engine
- Tests for each IO manager
- Commit: c631cf7

### Verification

Run tests with:
```bash
uv run pytest tests/test_io_managers.py tests/test_io_manager_registry.py -v
```

All 45 tests passing, 8 skipped (for optional dependencies boto3 and sqlalchemy).
