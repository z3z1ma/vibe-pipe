---
"id": "vp-101"
"status": "in_progress"
"deps":
- "vp-100"
"links": []
"created": "2026-01-27T23:30:00Z"
"type": "feature"
"priority": 1
"tags":
- "phase1"
- "persistence"
"external": {}
---
# IO Manager Abstraction Layer

Create IO Manager abstraction for asset materialization (Dagster-inspired). IO managers handle reading/writing assets to/from storage.

## Tasks

- Define `IOManager` protocol with `load()` and `save()` methods
- Create `MemoryIOManager` (default, existing behavior)
- Create `FileIOManager` (local file system)
- Create `S3IOManager` (AWS S3)
- Create `DatabaseIOManager` (SQLAlchemy-based)
- Add `io_manager` config to `Asset`
- Update execution engine to use IO managers

## Acceptance Criteria

- [ ] IO Manager protocol defined
- [ ] 4 IO managers implemented (memory, file, S3, database)
- [ ] Assets can specify IO manager in config
- [ ] Execution engine uses IO managers for materialization
- [ ] Load/save operations are type-safe
- [ ] Unit tests for each IO manager
- [ ] Integration test showing end-to-end materialization

## Example Usage

```python
@asset(
    io_manager="s3",
    uri="s3://my-bucket/assets/customers/{date}"
)
def customers():
    return df
```

## Deliverables

- New module: `src/vibe_piper/io_managers/`
- Protocol: `IOManager` in `types.py`
- Updated execution engine
- Tests for each IO manager

**Priority:** P0 (Blocker)
**Estimate:** 5 days
**Dependencies:** VP-100
