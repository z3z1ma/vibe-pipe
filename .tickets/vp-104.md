---
"id": "vp-104"
"status": "closed"
"deps":
- "vp-100"
"links": []
"created": "2026-01-27T23:30:00Z"
"type": "feature"
"priority": 2
"tags":
- "phase1"
- "lineage"
"external": {}
---
# Asset Versioning & Lineage

Add asset versioning and automatic lineage tracking for data governance.

## Tasks

- Add version field to assets
- Track lineage (upstream dependencies) in execution results
- Store asset metadata (created_at, updated_at, checksum)
- Add lineage query API
- Visualize lineage as Mermaid DAG

## Acceptance Criteria

- [ ] Assets have version numbers
- [ ] Lineage tracked automatically
- [ ] Can query upstream/downstream assets
- [ ] Can export lineage as Mermaid diagram
- [ ] Metadata stored with materialized assets
- [ ] API for querying lineage

## Deliverables

- Lineage tracking in execution engine
- Lineage query API
- Mermaid export function
- Tests

**Priority:** P1 (High)
**Estimate:** 3 days
**Dependencies:** VP-100

## Notes

**2026-01-28T00:09:42Z**

Implementation complete. All acceptance criteria met:
- Assets have version numbers ✓ (already in Asset type)
- Lineage tracked automatically ✓ (lineage field in AssetResult)
- Can query upstream/downstream assets ✓ (get_upstream, get_downstream methods)
- Can export lineage as Mermaid diagram ✓ (to_mermaid method)
- Metadata stored with materialized assets ✓ (created_at, updated_at, checksum in AssetResult)
- API for querying lineage ✓ (get_lineage_graph, get_upstream, get_downstream)

Implementation details:
- Added Asset metadata fields: created_at, updated_at, checksum
- Added AssetResult metadata fields: created_at, updated_at, checksum
- Implemented lineage query methods on AssetGraph
- Implemented Mermaid diagram export
- Added calculate_checksum utility function
- Updated DefaultExecutor to populate metadata
- Added comprehensive test suite (25 new tests)

All tests pass (353 passing, 32 pre-existing errors in expectations module)
Committed: 6fce7ba

**2026-01-28T00:11:28Z**

Branch rebased onto latest main (includes vp-103 validation framework changes). All tests still pass. Ready for re-review.

**2026-01-28T00:12:23Z**

Successfully rebased onto main (now at commit f5ae2e1, after be7e563 which includes vp-103 validation framework). All 25 lineage tests pass. Branch is 5 commits ahead of origin/main - ready for final review and merge.

**2026-01-28T00:14:54Z**

Successfully re-implemented branch on top of latest main (93e6847 which includes vp-101 IO Manager and vp-103 validation framework). Branch now at 2343563 with auto-resolved conflicts in execution.py and types.py. All 39 lineage and metadata tests pass. Working tree clean - ready for final review and merge.

**2026-01-28T00:15:40Z**

✅ APPROVED by manager! Implementation enqueued to merge queue. All 25 lineage tests passing. Clean rebase on latest main completed. Waiting for merge to main.
