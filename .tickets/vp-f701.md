---
"id": "vp-f701"
"status": "in_progress"
"deps": []
"links":
- "vp-7686"
"created": "2026-01-30T04:08:39Z"
"type": "feature"
"priority": 1
"assignee": "z3z1ma"
"tags":
- "sprint:Phase-1-foundations-config-pipelines-har"
- "phase1"
- "implementation"
- "schema"
- "sprint:Bootstrap-backlog-objective"
"external": {}
---
# Schema-first mapping (source_path + conversions)

Goal: Implement schema-first field mapping with `source_path` annotation to eliminate manual field extraction and type conversion.

Requirements:
1) `SchemaField.source_path` supports dot + bracket syntax (e.g., `company.name`, `tags[0]`, `data.items[0].name`).
2) Auto-mapping extracts values from nested structures; missing paths return `None` (log warning).
3) Auto-type conversion for `DATETIME`/`DATE`/`INTEGER`/`FLOAT`/`BOOLEAN`; invalid conversions produce clear errors; preserve timezone for `DATETIME`.
4) Field mapper utility maps a source record into a schema-typed record with validation and error collection.

Expected files:
- `src/vibe_piper/schema/__init__.py`
- `src/vibe_piper/schema/mapping.py`
- `src/vibe_piper/schema/field_mapper.py`
- `src/vibe_piper/types.py` (`SchemaField.source_path`)
- `tests/schema/test_mapping.py`
- `tests/schema/test_field_mapper.py`

Acceptance criteria:
- `source_path` annotation works for nested dicts + arrays
- Missing path handling returns `None` + warning
- Type conversion works for datetime/date/int/float/bool
- Required vs nullable field validation correct
- Tests cover core cases and edge cases (incl. errors)
- Documentation for `source_path` syntax

References:
- `docs/investigation_missing_abstractions.md` section 2.1.B
- `examples/api_ingestion/pipeline.py` (field extraction patterns)

## Notes

**2026-01-31T17:53:44Z**

Started implementation: inspected existing SchemaField/DataRecord semantics; will add SchemaField.source_path, implement new vibe_piper/schema (source_path parser + nested extraction with bracket syntax + type conversions) and FieldMapperResult with error/warning collection; add tests under tests/schema.

**2026-01-31T18:02:26Z**

API landed (stable names): , ,  (+ ConversionError/SourcePathSyntaxError). Higher-level:  (errors/warnings). Fixed bracket+dot parse:  now works. Verified: ..........                                                               [100%]
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.14.2-final-0 _______________

Name                                                    Stmts   Miss Branch BrPart  Cover   Missing
---------------------------------------------------------------------------------------------------
src/vibe_piper/__init__.py                                 66     24      2      1    63%   32-33, 187-188, 212-213, 219, 250-252, 266-267, 354-365
src/vibe_piper/benchmarks.py                              116     85     12      0    24%   135-138, 143-149, 153-162, 179-216, 252-265, 281-295, 304-316, 351-366, 401-425
src/vibe_piper/caching.py                                 364    285     84      0    18%   62, 66, 93-95, 100, 114, 119, 124, 129, 134, 139, 161-168, 180-211, 222-247, 259-265, 269-275, 284-298, 307-318, 331-342, 346-349, 362-366, 388-394, 399-400, 412-447, 458-498, 510-517, 521-531, 540-562, 571-582, 594-608, 642-644, 666-686, 705-714, 734-738, 751-768, 780-814, 823, 832-834, 838, 851-861, 874-880, 907-940
src/vibe_piper/cli/__init__.py                              3      3      0      0     0%   4-10
src/vibe_piper/cli/commands/__init__.py                     2      2      0      0     0%   3-13
src/vibe_piper/cli/commands/asset/__init__.py               3      3      0      0     0%   3-10
src/vibe_piper/cli/commands/asset/list.py                  81     81     16      0     0%   3-169
src/vibe_piper/cli/commands/asset/show.py                 114    114     40      0     0%   3-245
src/vibe_piper/cli/commands/config_cmd.py                 120    120     52      0     0%   3-284
src/vibe_piper/cli/commands/config_run.py                  61     61     22      0     0%   3-167
src/vibe_piper/cli/commands/dashboard.py                   18     18      2      0     0%   3-48
src/vibe_piper/cli/commands/docs.py                        67     67     20      0     0%   3-198
src/vibe_piper/cli/commands/init.py                        41     41      8      0     0%   3-218
src/vibe_piper/cli/commands/pipeline/__init__.py            7      7      0      0     0%   3-19
src/vibe_piper/cli/commands/pipeline/backfill.py          110    110     20      0     0%   3-289
src/vibe_piper/cli/commands/pipeline/history.py            76     76     22      0     0%   3-177
src/vibe_piper/cli/commands/pipeline/status.py            124    124     30      0     0%   3-251
src/vibe_piper/cli/commands/run.py                         80     80     14      0     0%   3-216
src/vibe_piper/cli/commands/test.py                        58     58     22      0     0%   3-154
src/vibe_piper/cli/commands/validate.py                    98     98     30      0     0%   3-232
src/vibe_piper/cli/commands/version.py                      8      8      2      0     0%   3-25
src/vibe_piper/cli/main.py                                 49     49      2      0     0%   3-249
src/vibe_piper/config/__init__.py                           5      5      0      0     0%   55-81
src/vibe_piper/config/loader.py                           129    129     50      0     0%   3-352
src/vibe_piper/config/schema.py                            53     53      6      0     0%   3-186
src/vibe_piper/config/secrets.py                           90     90     36      0     0%   3-272
src/vibe_piper/config/validation.py                        69     69     40      0     0%   3-198
src/vibe_piper/connectors/__init__.py                      57     20      0      0    65%   15, 24, 33, 42, 51-53, 57-59, 63-65, 69-71, 79-82
src/vibe_piper/connectors/base.py                         151     86     22      0    38%   62, 67, 73, 78, 83, 88, 93, 97-101, 113-121, 125-126, 130-132, 136-137, 141-142, 146-147, 151-152, 156-157, 161-182, 189-200, 210-225, 232-233, 278, 294, 306, 343, 367, 394-397, 401
src/vibe_piper/connectors/bigquery.py                     121    118     26      0     2%   11-394
src/vibe_piper/connectors/csv.py                          151    123     44      0    14%   63-65, 89-116, 128-137, 149-160, 173-188, 193-199, 211-223, 244-247, 251-252, 256-274, 278, 315-317, 344-376, 401-447, 456-468, 472-473
src/vibe_piper/connectors/excel.py                        160    136     52      0    11%   60-62, 88-111, 135-156, 170-175, 189-198, 216-232, 244-270, 279-285, 294-306, 348-350, 383-411, 438-461, 489-539, 548-560, 564-565
src/vibe_piper/connectors/json.py                         136    113     44      0    13%   61-63, 89-114, 126-135, 144-167, 179-180, 185-191, 200-212, 253-255, 282-319, 344-392, 401-413, 417-418
src/vibe_piper/connectors/mysql.py                        130    127     24      0     2%   12-334
src/vibe_piper/connectors/parquet.py                      141    116     34      0    14%   60-62, 86-104, 118-124, 133-165, 177-183, 192-204, 225-228, 232-242, 246-266, 270, 314-316, 343-376, 405-444, 453-465
src/vibe_piper/connectors/postgres.py                     102     99     16      0     3%   11-273
src/vibe_piper/connectors/snowflake.py                    124    121     28      0     2%   11-324
src/vibe_piper/connectors/utils/__init__.py                 4      0      0      0   100%
src/vibe_piper/connectors/utils/compression.py            151    127     68      0    11%   20-21, 53-62, 84-98, 127-143, 173-230, 258-290, 319-322, 326-344, 348-349, 370-373, 377-386, 390-391, 417-419
src/vibe_piper/connectors/utils/inference.py              115    100     48      0     9%   57-73, 95, 116-121, 131-150, 160-190, 195-219, 224-249, 254-286, 311-345
src/vibe_piper/connectors/utils/type_mapping.py           113    100     78      0     7%   42-69, 74-115, 120-137, 142-172, 202-215, 220-236, 241-257, 262-278, 303, 323
src/vibe_piper/core.py                                     23     23      4      0     0%   8-123
src/vibe_piper/dashboard/__init__.py                        4      4      0      0     0%   8-19
src/vibe_piper/dashboard/anomaly_detection.py             168    168     90      0     0%   7-502
src/vibe_piper/dashboard/api.py                           222    222     56      0     0%   7-859
src/vibe_piper/dashboard/models.py                        144    144     10      0     0%   7-367
src/vibe_piper/decorators.py                               95     82     30      0    10%   44-98, 137-205, 227-248, 288-320
src/vibe_piper/docs/__init__.py                             7      7      0      0     0%   12-19
src/vibe_piper/docs/base.py                                19     19      2      0     0%   7-66
src/vibe_piper/docs/catalog.py                             29     29      6      0     0%   7-117
src/vibe_piper/docs/cli.py                                 98     98     18      0     0%   7-252
src/vibe_piper/docs/lineage.py                             39     39      6      0     0%   7-157
src/vibe_piper/docs/schema.py                              38     38     16      0     0%   7-121
src/vibe_piper/docs/site.py                               116    116     26      0     0%   7-358
src/vibe_piper/error_handling.py                          347    230     88      0    27%   96-107, 120-137, 174, 209, 256, 293-296, 322-355, 367-368, 380-381, 400-409, 421-428, 432-433, 437-440, 449-450, 488-490, 530-536, 541, 564-589, 593-610, 614-621, 628-649, 661-662, 677-682, 717, 730-736, 788-932, 963, 1005-1008, 1012-1013, 1033, 1049-1060, 1084-1111, 1115, 1127-1130, 1142-1145, 1162-1182
src/vibe_piper/execution.py                               155    129     56      0    12%   69-80, 105-138, 171-276, 298-313, 369-438, 464-479, 500-513, 527-547
src/vibe_piper/expectations.py                            295    237    112      0    14%   59-62, 99-118, 133-137, 149, 158, 170, 185-188, 192, 196, 200, 204, 250-255, 300-312, 327-331, 343-345, 360-363, 375, 384, 396-426, 438, 442, 493-498, 543-582, 612-625, 645-658, 685-709, 734-748, 769-786, 811-835, 855-873, 893-911, 936-958, 978-1000, 1020-1042, 1062-1084, 1110-1132, 1156-1188
src/vibe_piper/external_quality/__init__.py                17      6      0      0    65%   47-49, 56-58
src/vibe_piper/external_quality/base.py                    36      9      4      0    68%   63, 98, 111, 123-131
src/vibe_piper/external_quality/great_expectations.py     202    174     86      0    10%   31-33, 66-67, 79-89, 106-139, 162-283, 337-369, 376-400, 404-422, 450-451, 484-491, 505-513
src/vibe_piper/external_quality/soda.py                   231    200     92      0    10%   32-34, 41-42, 74-75, 87-97, 114-147, 170-340, 394-426, 433-457, 461-479, 507-508, 541-548, 562-570
src/vibe_piper/external_quality/unified.py                144    127     46      0     9%   56-91, 134-157, 181-182, 222-347, 381-397
src/vibe_piper/integration/__init__.py                      8      0      0      0   100%
src/vibe_piper/integration/auth.py                        112     62     28      0    36%   59-61, 70, 97-102, 111-118, 142-144, 153-157, 197-205, 216-217, 226-235, 247-285, 308-310, 319-320
src/vibe_piper/integration/base.py                        141     95     34      0    26%   34-37, 49-50, 61, 72-73, 113-123, 151-155, 163-178, 225-234, 238-239, 243, 247-248, 257-259, 271-276, 312-405
src/vibe_piper/integration/graphql.py                      93     67     32      0    21%   49, 54, 58-60, 69-76, 123-138, 160-183, 201-212, 239-255, 281-289, 315, 345-393
src/vibe_piper/integration/pagination.py                  165    111     48      0    25%   99, 111-128, 140-154, 167-178, 212-213, 225-241, 253-274, 286-289, 314, 326-342, 354-355, 367-387, 423-450, 475-480
src/vibe_piper/integration/rest.py                         76     48     12      0    32%   49, 54, 102-113, 129-147, 167-173, 193-211, 238-248, 273-282, 307-316, 341-350, 373-383, 406-407, 426-427
src/vibe_piper/integration/validation.py                  118     95     60      0    13%   42, 51-54, 87-90, 111-134, 155-194, 211-242, 259-305, 322-338, 380-381, 406-407
src/vibe_piper/integration/webhook.py                     128     61     26      0    44%   61, 74-80, 118-126, 142-157, 169-191, 222-226, 252-256, 277-278, 296-319, 328, 346-350, 370
src/vibe_piper/io_managers/__init__.py                      7      0      0      0   100%
src/vibe_piper/io_managers/base.py                         10      2      0      0    80%   46, 62
src/vibe_piper/io_managers/database.py                     96     83      6      0    13%   56-75, 84-86, 90-105, 117, 130-168, 184-210, 219-236, 248-265
src/vibe_piper/io_managers/file.py                         67     54     20      0    15%   48-58, 71-72, 85-111, 127-148, 157-159, 171-172
src/vibe_piper/io_managers/memory.py                       20      9      0      0    55%   35, 46-47, 59-60, 72, 82, 86, 98
src/vibe_piper/io_managers/registry.py                     85     67     30      0    16%   36-40, 44, 63-69, 84-106, 127-176, 188, 197, 212-214, 230-231, 244-245
src/vibe_piper/io_managers/s3.py                           94     80     18      0    12%   59-81, 94-95, 110-131, 146-160, 173-184, 200-211, 220-226, 238-246
src/vibe_piper/lazy.py                                    183    129     48      0    23%   66, 78-81, 93-119, 123, 127, 131-135, 149, 181-191, 203-204, 215-218, 232-242, 251-258, 262, 294-299, 312-324, 336, 354-358, 390-393, 420-427, 454-462, 494-503, 528, 554-577, 590, 617-619, 623, 627-628, 632-637, 646-660
src/vibe_piper/materialization/__init__.py                  3      0      0      0   100%
src/vibe_piper/materialization/strategies.py               86     54     22      0    30%   49-51, 66, 90, 104, 129, 133, 152, 178, 182, 201, 231, 239, 258, 267-270, 311-315, 319, 339-347, 361-369, 390-418, 435, 444-446
src/vibe_piper/monitoring/__init__.py                       6      0      0      0   100%
src/vibe_piper/monitoring/errors.py                       132     81     36      0    30%   102-105, 114, 181-185, 216-269, 284-285, 289-300, 312-316, 328-329, 341-342, 354-355, 364-395, 424-437, 441-442, 446, 450, 454
src/vibe_piper/monitoring/health.py                       109     75     24      0    26%   67, 71, 75, 138-140, 153-158, 167-169, 184-208, 223-228, 243-259, 268-269, 278-279, 288, 313-360, 378-431
src/vibe_piper/monitoring/logging.py                      137     91     34      0    27%   50-51, 81-83, 95-147, 175, 187-196, 224-225, 246-253, 271, 289, 307, 325, 343, 361, 379-380, 415-467, 500-536, 558
src/vibe_piper/monitoring/metrics.py                      113     74     34      0    27%   98-102, 114-115, 160-166, 176-183, 189-201, 224-236, 245-272, 286-326, 335-336, 344-348, 357-378, 382-383
src/vibe_piper/monitoring/profiling.py                    117     88     22      0    21%   106-110, 114-125, 129-138, 158-188, 197-199, 217-244, 257-260, 269-272, 281-299, 333-364
src/vibe_piper/operators.py                               103     80     22      0    18%   25-28, 69, 105, 157, 204, 240, 273, 310, 343, 383-396, 435-443, 487-507, 550-574, 631, 674-689, 724-739, 777-792, 832-847
src/vibe_piper/orchestration.py                           284    215     92      0    18%   70-71, 75-76, 80, 84, 88, 101, 134, 143-150, 162-176, 185-189, 211-212, 216-217, 221-223, 242-243, 306-312, 333-448, 466-478, 499-589, 610-643, 664-722, 738-753, 767-809, 821-822, 834, 846-847
src/vibe_piper/pipeline.py                                146    127     60      0     9%   57-79, 119-122, 176-253, 267-311, 352-353, 357, 361, 410-506, 515, 544
src/vibe_piper/pipeline_config/__init__.py                  4      4      0      0     0%   70-90
src/vibe_piper/pipeline_config/generator.py               173    173     86      0     0%   7-527
src/vibe_piper/pipeline_config/loader.py                   90     90     68      0     0%   7-230
src/vibe_piper/pipeline_config/parser.py                  297    297    112      0     0%   7-725
src/vibe_piper/pipeline_config/schema.py                  170    170     10      0     0%   7-506
src/vibe_piper/quality.py                                 173    164     86      0     3%   42-120, 151-237, 268-352, 383-480, 517-565
src/vibe_piper/query_hints.py                             174    105     58      0    30%   67-72, 76, 100-105, 109, 132-137, 141, 164-167, 171, 192-194, 198, 219-221, 225, 266-302, 306, 334, 346-349, 361-364, 376-379, 391-394, 406-409, 421-424, 436-439, 451-454, 467-468, 480-481, 493-494, 507-510, 519, 553-575
src/vibe_piper/scheduling/__init__.py                       6      0      0      0   100%
src/vibe_piper/scheduling/backfill.py                     154    125     44      0    15%   81-82, 107-125, 147-178, 189-226, 237-274, 294-331, 342-379, 391-428, 438-453, 465-477
src/vibe_piper/scheduling/base.py                          99     34     18      0    56%   149-161, 165, 169, 206-217, 254-262
src/vibe_piper/scheduling/persistence.py                  155    128     46      0    13%   51-52, 56-59, 72-80, 92-100, 115-127, 139-147, 160-169, 186-204, 216-217, 230-239, 251-262, 271-285, 298-313, 330-352, 360-370, 375-407, 411-414
src/vibe_piper/scheduling/scheduler.py                    198    159     42      0    16%   84-97, 105-120, 124-135, 139, 159-171, 183, 198, 210-231, 243-264, 276, 291-292, 300-319, 323-347, 354-393, 414-507, 516-523, 536-548, 577-582, 604-655
src/vibe_piper/scheduling/schedules.py                    191    137     58      0    22%   48, 66, 76, 90, 135-150, 154-197, 203-224, 240-260, 264, 284-300, 304, 313, 349-376, 391-397, 407, 411, 420, 464, 482-504, 515, 519, 529
src/vibe_piper/schema/__init__.py                           3      0      0      0   100%
src/vibe_piper/schema/field_mapper.py                      41      2     14      1    95%   41->46, 63-64
src/vibe_piper/schema/mapping.py                          194     60     98     27    70%   64-65, 84-85, 89-90, 102-103, 111-112, 116-117, 137-139, 162->168, 175->177, 184-186, 196, 202, 204, 208-212, 216, 218, 222-226, 230-231, 233, 245-250, 254-255, 257, 261-268, 272, 274-277, 286-290
src/vibe_piper/schema_definitions.py                      151     65     62     10    48%   89-93, 164, 166, 168, 220-223, 225-228, 232, 234, 285-302, 342, 382, 422, 542, 578-620, 637, 642, 646, 709->704, 715-718, 740-742, 751
src/vibe_piper/schema_evolution.py                        363    231    156      0    25%   101-109, 113-118, 122-139, 143-145, 149-151, 161, 179-180, 186, 195, 204, 226-245, 279-281, 316, 362-364, 405-415, 419-434, 438, 511, 537-544, 556-561, 574-578, 590-591, 607-622, 626, 667-718, 742-826, 842-856, 882-904, 925-960, 975-988, 1000-1012, 1034-1035, 1048-1057, 1095-1135, 1154-1156, 1162
src/vibe_piper/sinks/__init__.py                           21     21      0      0     0%   9-37
src/vibe_piper/sinks/base.py                               21     21      0      0     0%   8-107
src/vibe_piper/sinks/database.py                          132    132     42      0     0%   8-405
src/vibe_piper/sinks/ddl_generator.py                     127    127     44      0     0%   14-430
src/vibe_piper/sinks/file.py                              149    149     40      0     0%   9-433
src/vibe_piper/sinks/s3.py                                156    156     40      0     0%   8-441
src/vibe_piper/sources/__init__.py                          4      4      0      0     0%   13-17
src/vibe_piper/sources/api.py                             217    217     70      0     0%   12-495
src/vibe_piper/sources/base.py                             17     17      2      0     0%   7-95
src/vibe_piper/sources/database.py                        136    136     34      0     0%   11-354
src/vibe_piper/sources/file.py                            165    165     70      0     0%   10-371
src/vibe_piper/sql_assets.py                              161    113     36      1    25%   46-47, 61-62, 89->103, 126-206, 244-290, 309-312, 357-375, 409-461, 492-529, 572-590
src/vibe_piper/transformations/__init__.py                  9      0      0      0   100%
src/vibe_piper/transformations/aggregations.py            172    135     68      0    15%   27-28, 33, 37, 44, 51, 54, 61, 68, 75, 116-119, 139-169, 178-211, 215, 266-269, 286-308, 314-327, 335-356, 360, 400-403, 415-449, 455-468, 476-497, 501
src/vibe_piper/transformations/builder.py                  91     73     14      0    17%   49-52, 89-94, 123-141, 165-169, 193-206, 233-245, 275-288, 319-333, 364-378, 402-403, 418-424, 440-449, 479
src/vibe_piper/transformations/cleaning.py                443    360    190      0    13%   138, 142, 195-215, 254-347, 380-411, 433-442, 477-556, 575-576, 600-601, 636-682, 715-769, 795-798, 830-884, 908-910, 943-981, 1000-1001, 1020-1021, 1059-1114, 1136-1137, 1161-1164, 1195-1232, 1255-1259, 1283-1291, 1309-1314, 1341-1364
src/vibe_piper/transformations/joins.py                   102     84     44      0    12%   74-87, 107-141, 145-146, 154-185, 194-233, 237-246, 255, 292-298
src/vibe_piper/transformations/pivot.py                   112     96     48      0    10%   59-65, 85-134, 142-173, 177-184, 188, 244-249, 269-290, 298-330, 334-340, 344
src/vibe_piper/transformations/transforms.py              167    151     64      0     7%   31-40, 68-88, 118-140, 164-181, 208-235, 257-260, 288-322, 361-393, 417-437, 456-473, 492-509, 535-559
src/vibe_piper/transformations/validators.py              108     93     76      0     8%   41-61, 82-83, 103-105, 126-130, 156-165, 191-205, 226, 252-325, 355-368, 396-400, 426-429
src/vibe_piper/transformations/windows.py                 126     93     50      0    19%   37, 45, 52, 60, 67, 89-92, 95-98, 120-123, 126-129, 170-187, 204-250, 258-278, 282, 316-336
src/vibe_piper/types.py                                   454    221    134      6    41%   142-143, 145-146, 174-175, 178-179, 183-186, 190, 217-218, 225-226, 230, 234-237, 269, 273, 277, 308-313, 365-370, 404-411, 415-416, 455-498, 558-579, 583-602, 606-609, 613-620, 624-628, 645-676, 702-727, 753-778, 797, 821-839, 860-872, 919, 934, 961, 982, 994, 1015, 1036, 1055, 1073, 1101, 1152-1158, 1170, 1277, 1286, 1295
src/vibe_piper/validation/__init__.py                      40     40      0      0     0%   16-277
src/vibe_piper/validation/anomaly_detection.py            311    311    104      0     0%   12-1035
src/vibe_piper/validation/checks.py                       476    476    268      0     0%   15-1200
src/vibe_piper/validation/data_profiling.py               179    179     62      0     0%   11-466
src/vibe_piper/validation/decorators.py                   193    193     50      0     0%   8-487
src/vibe_piper/validation/drift_detection.py              353    353    112      0     0%   16-1238
src/vibe_piper/validation/history.py                      269    269     68      0     0%   17-1070
src/vibe_piper/validation/integration.py                   41     41     10      0     0%   9-223
src/vibe_piper/validation/quality_scoring.py              332    332    148      0     0%   15-1140
src/vibe_piper/validation/suite.py                        134    134     46      0     0%   8-448
src/vibe_piper/web/__init__.py                             21     21      0      0     0%   3-68
src/vibe_piper/web/api/__init__.py                          6      6      0      0     0%   3-22
src/vibe_piper/web/api/endpoints/__init__.py                2      2      0      0     0%   3-5
src/vibe_piper/web/api/endpoints/auth.py                   92     92     12      0     0%   3-384
src/vibe_piper/web/api/endpoints/health.py                 16     16      0      0     0%   3-57
src/vibe_piper/web/api/endpoints/pipelines.py              63     63      8      0     0%   3-401
src/vibe_piper/web/api/router.py                            6      6      0      0     0%   6-28
src/vibe_piper/web/middleware/__init__.py                   2      2      0      0     0%   3-5
src/vibe_piper/web/middleware/error_handler.py             35     35      0      0     0%   3-126
src/vibe_piper/web/middleware/rate_limit.py                66     66     20      0     0%   3-243
src/vibe_piper/web/middleware/request_id.py                33     33      8      0     0%   3-102
---------------------------------------------------------------------------------------------------
TOTAL                                                   17132  14373   5412     46    13%
Coverage HTML written to dir htmlcov
10 passed in 3.69s, All checks passed!.

**2026-01-31T18:02:39Z**

Stable API for vp-36be adoption:
- vibe_piper.schema.mapping.parse_source_path(path: str) -> tuple[str | int, ...]
- vibe_piper.schema.mapping.extract_value(source: Any, source_path: str, field_name: str | None = None, warn_on_missing: bool = True) -> tuple[Any, bool]
- vibe_piper.schema.mapping.convert_value(value: Any, data_type: DataType, field_name: str | None = None) -> Any (raises ConversionError)
- vibe_piper.schema.field_mapper.map_record_to_schema(schema: Schema, source_record: Mapping[str, Any]) -> FieldMapperResult
Bracket+dot parse fixed for items[0].name.
Verified: uv run pytest tests/schema -q; uv run ruff check src/vibe_piper/schema tests/schema

**2026-01-31T18:03:54Z**

Manager note: vp-36be adoption work is starting; please publish a stable nested-path API (function/class names + semantics) via ticket notes so vp-36be can wire without duplicating parser logic.

**2026-01-31T18:04:52Z**

Milestone commit: 148c46b implements schema-first mapping: SchemaField.source_path + vibe_piper.schema.{mapping,field_mapper} with dot+bracket parsing, nested extraction, conversions (datetime/date/int/float/bool), and FieldMapperResult error/warning collection. Tests added under tests/schema. Verified: uv run pytest tests/schema -q; uv run ruff check src/vibe_piper/schema tests/schema.
