---
"id": "vp-8690"
"status": "in_progress"
"deps": []
"links": []
"created": "2026-01-30T05:03:33Z"
"type": "feature"
"priority": 1
"assignee": "z3z1ma"
"tags":
- "phase3"
- "implementation"
- "configuration"
"external": {}
---
# Implement Configuration-Driven Pipelines

Implement configuration-driven pipeline definition (TOML/YAML) to enable declarative pipeline creation without code.

Based on investigation (vp-5299), Phase 3 needs:

Configuration-Driven Pipelines to implement:
1. **Config Parser** - Parse TOML/YAML pipeline definitions:
   - Support for TOML format (using tomllib)
   - Support for YAML format (using pyyaml)
   - Environment variable interpolation (${VAR_NAME})
   - Config validation against schema

2. **Pipeline Generator** - Generate @asset functions from config:
   - Parse sources section and create @asset sources
   - Parse sinks section and create @asset sinks
   - Parse transforms section and create @asset transforms
   - Parse expectations section and add expectations
   - Parse jobs section and create scheduled jobs
   - Automatic dependency inference from asset names

3. **Config Schema** - Define config file structure:
   - [pipeline] section (name, version, description)
   - [[sources]] section (type, endpoint, connection, table, schema, auth, pagination, rate_limit)
   - [[sinks]] section (type, connection, table, schema, materialization, upsert_key, path, format, partition_cols)
   - [[transforms]] section (source, steps as array of operations)
   - [[expectations]] section (asset, checks as array of validation rules)
   - [[jobs]] section (schedule, sources, sinks, transforms, expectations)

4. **CLI Integration** - Load and execute config files:
   - vibepiper run --config pipeline.toml
   - vibepiper validate --config pipeline.toml
   - vibepiper describe --config pipeline.toml (show DAG)

Expected files:
- src/vibe_piper/config/__init__.py
- src/vibe_piper/config/parser.py (TOML/YAML parser)
- src/vibe_piper/config/schema.py (config validation schema)
- src/vibe_piper/config/generator.py (pipeline generator)
- src/vibe_piper/config/loader.py (config loader utility)
- src/vibe_piper/config/__init__.py (module exports)
- tests/config/test_parser.py
- tests/config/test_generator.py
- docs/config_driven_pipelines.md (config reference and examples)
- examples/pipelines/demo_pipeline.toml (example config)
- examples/pipelines/demo_pipeline.yaml (example config)

Acceptance Criteria:
- Can define complete pipeline via TOML/YAML config
- Pipeline generator creates correct @asset functions
- Automatic dependency inference from config
- Environment variable interpolation working
- Config validation provides helpful error messages
- CLI commands (run, validate, describe) working
- Comprehensive test coverage (80%+)
- Documentation for config schema and CLI

Success Metrics (from investigation):
- Zero code for simple pipelines
- Declarative pipeline definition
- Easy deployment (copy config file)
- Version-controlled pipeline definitions
- Non-technical users can modify pipelines

Reference:
- Investigator design in docs/investigation_missing_abstractions.md section 2.E
- User goal: 'Zero code for simple pipelines'
